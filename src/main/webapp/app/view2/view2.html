<div class='container'>
    <p>Github link: <a href="https://github.com/Tonkey/CA3/tree/database" target="_blank">Github</a></p>
    <h1>Authors</h1>

    <div>
        <h3>Nicolai Cornelis:</h3>
        <p>Study Points: Max</p>
        <p>cleaned out in api End points, changed error modal in Auth.js, Angular for CVRSearch, XML reader, fixed same-origin issue, JPA for currency Rates/Description</p>
    </div>
    <div>
        <h3>Michael Larsen:</h3>    
        <p>Study Points: Max</p>
        <p>created everything concerning user role restricted functions, backend and frontend tasks.</p>
    </div>
    <div>
        <h3>Nicklas Molving:</h3>
        <p>Study Points: Max</p>
        <p>cleaned out in api End points, created sign-up, created admin functions(getUsers/delete), JPA for currency Rates/Description</p>
    </div>
    <h1>Automated Test</h1>
    <div>
        <h3>JUnit Tests</h3>
        <p>
            We used JUnit-tests for automated backend testing of our Database calls with JPA.<br>
        </p>
        <div class='importantText'> *mouse over the pictures to enlarge for better view.</div>
        <div>
            <h3>CurrencyTest no 1 - 'Server to servercall'</h3>
            <ul>
                <li>1.1 - 'checking bytes' - 
                    <ul><li>checking costum connection to server returns bytes.</li></ul></li>
            </ul>
            <h3>Currency Test no. 2 - 'Compare data'</h3>
            <ul>
                <li>2.1 - 'server call'
                    <ul><li>Checking that the program makes a correct servercall.</li></ul></li>
                <li> 2.2 - 'Comparing lengths'
                    <ul><li>Checking that array from servercall and array from databasecall is equal in length.</li></ul></li>
                <li> 2.3 - 'Comparing different codes'
                    <ul><li>Checking that array from servercall and array from databasecall contains the same currency-codes.</li></ul></li>
            </ul>
            <h3>Currency Test no. 3 - 'Scheduler'</h3>
            <ul>
                <li>3.1 - 'ScheduledExecutorService'
                    <ul><li>Checking that the executorService auto updates in a interval</li></ul></li>         
            </ul>
            <p>
                <img class="testImages testLog" src="app/view2/img/currencyTestLog.png" alt=""/>
            </p>
            <p>
                <img class="testImages testResult" src="app/view2/img/currencyTestBar.png" alt=""/>
            </p>
        </div>
        <div>
            <h3>UserTest no 1 - 'Multible-Users'</h3>
            <ul>
                <li>1.1 - 'creating 3 new user' 
                    <ul><li>creating 3 testusers : 'testuser1' - 'testuser2' - 'testuser3' and inserting them in derby database 'CA3DBTEST'.</li></ul></li>
            </ul>
            <ul>
                <li>1.2 - 'dublicate entry' 
                    <ul><li>inserting another 'testuser1' in the derby database 'CA3DBTEST' - checking for null return value - Duplicate key value'.</li>
                        <li>As expected the derby database casts a SQLException for 'unique primary key constraint' , because the user already exist in 'CA3DBTEST'<br>
                            <img class="testImages testLog" src="app/view2/img/userTestPrimKConstraint.png" alt=""/></li></ul></li>
            </ul>
            <ul>
                <li>1.3' - getAllUsers' 
                    <ul><li>from Database conmparing first name in arrayList - and comparing the first name of the list with the first testusers name.</li></ul></li>
            </ul>
            <h3> UserTest no. 2 - 'Single-User'</h3>
            <ul>
                <li>2.1 - 'creating a new user' 
                    <ul><li>creating a new user - 'testuser' and inserting it in derby database 'CA3DBTEST' - checking the return value is equal to testuser-name.</li></ul></li>
            </ul>
            <ul>
                <li>2.2 - 'Login' 
                    <ul><li>Login with 'testuser' - checking the return value is 'User'.</li></ul></li>
            </ul>
            <ul>
                <li>2.3' - Get user by ID' 
                    <ul><li>Getting user from the derby testdatabase 'CA3DBTEST' - checking that the name is equal to an expected namevalue.</li></ul></li>
            </ul>
            <ul>
                <li>2.4' - Delete User' 
                    <ul><li>Deleting 'testuser' from the derbydatabase 'CA3DBTEST' - checking that the return value is true.</li></ul></li>
            </ul>
            <p>
                <img class="testImages testLog" src="app/view2/img/userTest1.png" alt=""/>
            </p>
            <p>
                <img class="testImages testLog" src="app/view2/img/userTest2.png" alt=""/>
            </p>
            <p>
                <img class="testImages testResult" src="app/view2/img/userTestBar.png" alt=""/>
            </p>
        </div>
    </div>
    <h1>How to test the system</h1>
    <div>
        <h3>test via Postman:</h3>
        <p>if you do not already have postman installed you can use this link: <a href="https://www.getpostman.com/" target="_blank">Postman</a></p>
        <p>
            Test create user: in postman, chose the POST http verb url: /api/login/createUser<br>
            under the header tab you should add Key: Content-Type and Value: application/json<br>
            finally in the body you should add {"userName": "your username!", "passwordHash": "your password!"} please use your own username and password!!!<br>
            if you recieve status 201 the request was successful, and you can now login with the user!
        </p>
        <p>Test login: in postman, chose the POST http verb url: /api/login<br>
            under the header tab you should add Key: Content-Type and value: application/json<br>
            finally in the body you should add {"username":"user","password":"test"} or your own created user!!!<br>
            if you recieve status 200 and json containing username and token, the request was successful.
        </p>
        <p>
            Test All Users: in postman, chose the GET http verb url: /api/users<br>
            under the header tab you should add Key: Content-Type and Value: application/json<br>
            you will also have to login(see test login) with the admin user and get the returned token!<br>
            when you have the authorization token: you need the add Key: Authorization value: the token you got from the previous step!<br>
            if you recieve status 200 and json containing a list of usernames the request was successful.
        </p>
        <p>
            Test Delete user: in postman, chose the DELETE http verb url: /api/users<br>
            under the header tab you should add Key: Content-Type and Value: application/json<br>
            you will also have to login(see test login) with the admin user and get the returned token!<br>
            when you have the authorization token: you need the add Key: Authorization value: the token you got from the previous step!<br>
            finally in the body you should add {"username":"the user you want to delete!"}, please do not use admin,user or user_admin :)<br>
            if you recieve status 200 the request was completed and the user deleted!
        </p>
        <p>Michael please either write the postman for user functions yourself or msg me when the rest is done!</p>

        <h3>How to use:</h3>
        <p>first go to: <a href="#/view1" target="_blank">Home!</a><br>
            then you can either login with one of the following:<br>
            Username: user, Password: test, Role:User<br>
            Username: admin, Password: test, Role:Admin<br>
            Username: user_admin, Password: test, Role:User and Admin<br>
            or you can create your own user by clicking on the sign-up link in the right corner,<br>
            this user will however only have the user role!
        </p>
        <p>
            When you are logged in as a user, you should see two new tabs in the navbar!, "Company Info" and "Exchange Rate Info"<br>
        </p>
        <p>Firstly you can lookup any company in Denmark and Norway on the Company Info page, by typing in the Name or CVR of the company and pushing the search button.<br>
            Remember to chose the right country in the drop down to the left of the search field!</p>
        <p>You can also try the Exchange Rate function where you can convert from all the currencies registered in the Danish National Bank to Danish Kroner.
            This can be done by simply typing the amount you want to convert, and choosing the currency you want to convert from in the dropdown menu.
            Furthermore you can see the the current exchange rates just below the conversion function, this can be updated by clicking the "update" button in the top left of the page. </p>

        <p>
            When you are logged in as a admin, you should see a new tab called "All Users".<br>
            When you enter this new tab, you will be presented with a table that shows all the users currently in the database as well as the option to delete this!<br>
            obs! you will not be able to delete the 3 standard users: "user", "admin" and "user_admin"!
        </p>

    </div>
</div>
